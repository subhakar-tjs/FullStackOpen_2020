{"version":3,"sources":["components/Person.js","components/Persons.js","components/FilterModule.js","components/PersonForm.js","services/names.js","App.js","index.js"],"names":["Person","id","name","phone","deletePerson","onClick","Persons","persons","foundPerson","searchedPerson","map","p","FilterModule","handlePersonSearch","onChange","value","PersonForm","addPerson","handleNameChange","newName","handlePhoneChange","newPhone","onSubmit","type","baseUrl","all","getAll","axios","get","then","response","data","create","newObject","post","update","put","delete","App","useState","setPersons","useEffect","service","initialPersons","setNewName","setNewPhone","setSearchedPerson","setFoundPerson","notify","setNotify","error","setError","Notify","message","className","Error","event","target","personResult","filter","person","toLowerCase","includes","preventDefault","nameObject","some","item","index","findIndex","window","confirm","returnedPerson","setTimeout","concat","result","console","log","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.70dd3f66.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction Person({ id,name,phone,deletePerson }) {\r\n    return (\r\n      <div>\r\n        <p>{name} {phone} <button onClick={() => deletePerson(id,name)}>delete</button></p>\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Person","import React from 'react'\r\nimport Person from './Person'\r\n\r\nfunction Persons({persons,foundPerson, searchedPerson,deletePerson}) {\r\n    const rows = () =>\r\n        searchedPerson === \"\"\r\n        ? (persons.map(p => <Person key={p.id} id={p.id} name={p.name} phone={p.phone} deletePerson={deletePerson}/>)\r\n        ) : ( foundPerson.map(p => (<p key={p.id}>{p.name} {p.phone}</p>))\r\n        )\r\n    return (\r\n        <div>\r\n            {rows()}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from \"react\"\r\n\r\nfunction FilterModule({ searchedPerson, handlePersonSearch }) {\r\n  return (\r\n    <div>\r\n        filter shown with: <input onChange={handlePersonSearch} value={searchedPerson}/>\r\n    </div> \r\n  )\r\n}\r\n\r\nexport default FilterModule","import React from 'react'\r\n\r\nfunction PersonForm({addPerson, handleNameChange, newName, handlePhoneChange, newPhone}) {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange}/>\r\n        </div>\r\n        <div>\r\n          Numbers: <input value={newPhone} onChange={handlePhoneChange}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);  \r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst all = { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  deletePerson: deletePerson \r\n}\r\n\r\nexport default all;","import React, { useState ,useEffect} from 'react'\r\nimport Persons from './components/Persons'\r\nimport FilterModule from './components/FilterModule'\r\nimport PersonForm from './components/PersonForm'\r\n// import axios from 'axios'\r\nimport service from './services/names'\r\nimport './App.css'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n\r\n  useEffect(() => {\r\n    service\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newPhone, setNewPhone ] = useState('')\r\n  const [searchedPerson, setSearchedPerson] = useState('')\r\n  const [foundPerson, setFoundPerson] = useState([])\r\n  const [notify, setNotify] = useState(null)\r\n  const [error, setError] = useState(null)\r\n\r\n  const Notify = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className=\"notify\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Error = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n\r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n    const nameObject = {\r\n      name: newName,\r\n      phone:newPhone,\r\n    }\r\n    if(persons.some(item => item.name === newName) === true){\r\n      let index = persons.findIndex(p => p.name === newName);\r\n      let id = persons[index].id;\r\n      let checkNameDialogue = window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`);\r\n      if (checkNameDialogue === true) {\r\n        service\r\n          .update(id, nameObject)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(p => p.id !== id ? p : returnedPerson))\r\n          })\r\n          setNotify(\r\n            `Updated ${newName}`\r\n          )\r\n          setTimeout(() => {\r\n            setNotify(null)\r\n          }, 5000)\r\n        }\r\n    }\r\n    else{\r\n      service\r\n      .create(nameObject)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson));\r\n        setNewName('')\r\n        setNewPhone('')\r\n      })\r\n      setNotify(\r\n        `Added ${newName}`\r\n      )\r\n      setTimeout(() => {\r\n        setNotify(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const deletePerson = (id, name) => {\r\n    let result = window.confirm(`Delete ${name}?`);\r\n    console.log(id)\r\n    if (result === true) {\r\n      service\r\n        .deletePerson(id)\r\n        .then(() => {\r\n          setPersons(persons.filter(p => p.id !== id))\r\n          setNotify(\r\n            `${name} succesfully deleted`\r\n          )\r\n          setTimeout(() => {\r\n            setNotify(null)\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          setError(\r\n            `Information of '${name}' has already been removed from server`\r\n          )\r\n          setTimeout(() => {\r\n            setError(null)\r\n          }, 5000)\r\n          setPersons(persons.filter(p => p.id !== id))\r\n        })\r\n    }\r\n  }\r\n  \r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handlePhoneChange = (event) => {\r\n    setNewPhone(event.target.value)\r\n  }\r\n\r\n  const handlePersonSearch = (event) => {\r\n    setSearchedPerson(event.target.value);\r\n    const personResult = persons.filter(person =>\r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n    );\r\n    setFoundPerson(personResult);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notify message={notify} />\r\n      <Error message={error} />\r\n      <FilterModule handlePersonSearch={handlePersonSearch} searchedPerson={searchedPerson}/> \r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        handleNameChange={handleNameChange}\r\n        newName={newName}\r\n        handlePhoneChange={handlePhoneChange}\r\n        newPhone={newPhone}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={persons} foundPerson={foundPerson} searchedPerson={searchedPerson} deletePerson={deletePerson}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App.js'\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}