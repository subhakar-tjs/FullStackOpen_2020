(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),o=t(3),a=t(1),u=t(0);var s=function(e){var n=e.id,t=e.name,c=e.phone,r=e.deletePerson;return Object(u.jsx)("div",{children:Object(u.jsxs)("p",{children:[t," ",c," ",Object(u.jsx)("button",{onClick:function(){return r(n,t)},children:"delete"})]})})};var i=function(e){var n=e.persons,t=e.foundPerson,c=e.searchedPerson,r=e.deletePerson;return Object(u.jsx)("div",{children:""===c?n.map((function(e){return Object(u.jsx)(s,{id:e.id,name:e.name,phone:e.phone,deletePerson:r},e.id)})):t.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.phone]},e.id)}))})};var d=function(e){var n=e.searchedPerson,t=e.handlePersonSearch;return Object(u.jsxs)("div",{children:["filter shown with: ",Object(u.jsx)("input",{onChange:t,value:n})]})};var l=function(e){var n=e.addPerson,t=e.handleNameChange,c=e.newName,r=e.handlePhoneChange,o=e.newPhone;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:c,onChange:t})]}),Object(u.jsxs)("div",{children:["Numbers: ",Object(u.jsx)("input",{value:o,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},h=t(4),j=t.n(h),f="http://localhost:3001/persons",b={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))}},O=(t(38),function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1];Object(a.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);var r=Object(a.useState)(""),s=Object(o.a)(r,2),h=s[0],j=s[1],f=Object(a.useState)(""),O=Object(o.a)(f,2),m=O[0],v=O[1],p=Object(a.useState)(""),x=Object(o.a)(p,2),P=x[0],g=x[1],w=Object(a.useState)([]),C=Object(o.a)(w,2),S=C[0],N=C[1],k=Object(a.useState)(null),y=Object(o.a)(k,2),T=y[0],A=y[1],I=Object(a.useState)(null),D=Object(o.a)(I,2),E=D[0],J=D[1],L=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"notify",children:n})},B=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(L,{message:T}),Object(u.jsx)(B,{message:E}),Object(u.jsx)(d,{handlePersonSearch:function(e){g(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));N(n)},searchedPerson:P}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:h,phone:m};if(!0===t.some((function(e){return e.name===h}))){var r=t.findIndex((function(e){return e.name===h})),o=t[r].id;!0===window.confirm("".concat(h," is already added to the phonebook, replace the old number with a new one?"))&&(b.update(o,n).then((function(e){c(t.map((function(n){return n.id!==o?n:e})))})),A("Updated ".concat(h)),setTimeout((function(){A(null)}),5e3))}else b.create(n).then((function(e){c(t.concat(e)),j(""),v("")})),A("Added ".concat(h)),setTimeout((function(){A(null)}),5e3)},handleNameChange:function(e){j(e.target.value)},newName:h,handlePhoneChange:function(e){v(e.target.value)},newPhone:m}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(i,{persons:t,foundPerson:S,searchedPerson:P,deletePerson:function(e,n){var r=window.confirm("Delete ".concat(n,"?"));console.log(e),!0===r&&b.deletePerson(e).then((function(){c(t.filter((function(n){return n.id!==e}))),A("".concat(n," succesfully deleted")),setTimeout((function(){A(null)}),5e3)})).catch((function(r){J("Information of '".concat(n,"' has already been removed from server")),setTimeout((function(){J(null)}),5e3),c(t.filter((function(n){return n.id!==e})))}))}})]})});r.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.70dd3f66.chunk.js.map